<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Neuron OS</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="data:,">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Обои -->
  <div id="wallpaper"></div>

  <!-- Регистрация / Вход -->
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <h2>Добро пожаловать в <span class="brand">Neuron OS</span></h2>
      <div id="auth-form">
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Пароль" required />
  <div class="auth-buttons">
    <button id="login-btn" class="auth-btn">Войти</button>
    <button id="register-btn" class="auth-btn">Регистрация</button>
  </div>
  <div class="divider">или</div>
  <button id="google-btn" class="auth-btn google-btn">
    <svg viewBox="0 0 18 18" width="18" height="18">
      <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.208 1.125-.842 2.078-1.777 2.712v2.297h2.878c1.683-1.55 2.655-3.83 2.655-6.65z"/>
      <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.878-2.297c-.805.54-1.837.86-2.978.86-2.292 0-4.236-1.545-4.933-3.627H2.1v2.284C3.58 16.22 6.136 18 9 18z"/>
      <path fill="#FBBC05" d="M4.067 10.787C3.91 10.347 3.82 9.88 3.82 9.397c0-.483.09-.95.247-1.39V5.723H1.1C.58 6.85.3 8.085.3 9.397c0 1.312.28 2.548.8 3.674l2.967-2.284z"/>
      <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.346l2.582-2.58C13.463.89 11.426 0 9 0 6.136 0 3.58 1.78 2.1 4.04l2.967 2.284C5.764 4.24 7.708 3.58 9 3.58z"/>
    </svg>
    Google
  </button>
</div>
      <div id="auth-loading" class="hidden">Загрузка...</div>
    </div>
  </div>

  <!-- Рабочий стол -->
  <div id="desktop" class="hidden"></div>

  <!-- Окна -->
  <div id="windows-container"></div>

  <!-- Dock -->
  <div id="dock">
    <div class="dock-icon pinned" data-app="browser" title="Интернет">
      <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
      <div class="dock-dot"></div>
    </div>
    <!-- Динамические иконки -->
  </div>

  <!-- Настройки -->
  <div id="settings-modal" class="window hidden">
    <div class="window-header">
      <span>Настройки</span>
      <div class="window-controls">
        <div class="control-btn close" onclick="closeWindow('settings')"></div>
        <div class="control-btn minimize" onclick="minimizeWindow('settings')"></div>
        <div class="control-btn maximize" onclick="maximizeWindow('settings')"></div>
      </div>
    </div>
    <div class="window-content">
      <div class="settings-section">
        <h3>Тема</h3>
        <label><input type="radio" name="theme" value="dark" checked> Тёмная</label>
        <label><input type="radio" name="theme" value="light"> Светлая</label>
      </div>
      <div class="settings-section">
        <h3>Обои</h3>
        <input type="file" id="wallpaper-input" accept="image/*" />
        <div class="wallpaper-gallery">
          <img src="https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?w=800" data-wallpaper="nature" />
          <img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800" data-wallpaper="city" />
          <img src="https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=800" data-wallpaper="space" />
          <img src="https://images.unsplash.com/photo-1550745162-459ca0d0e52a?w=800" data-wallpaper="minimal" />
        </div>
      </div>
      <button id="apply-settings" class="glass-btn">Применить</button>
    </div>
  </div>

  <!-- Контекстное меню -->
  <div id="context-menu" class="hidden">
    <div class="menu-item" data-action="pin">Закрепить в Dock</div>
    <div class="menu-item" data-action="open-tab">Открыть в новой вкладке</div>
    <div class="menu-item" data-action="ask-ai">Спросить у AI</div>
  </div>

  <script type="module" src="script.js"></script>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDOaDVzzPjyYm4HWMND2XYWjLy_h4wty5s",
      authDomain: "neuron-ecosystem-2025.firebaseapp.com",
      projectId: "neuron-ecosystem-2025",
      storageBucket: "neuron-ecosystem-2025.firebasestorage.app",
      messagingSenderId: "589834476565",
      appId: "1:589834476565:web:622fe04057d33339dd421c",
      measurementId: "G-Z934BZPLG3"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const googleProvider = new GoogleAuthProvider();

    window.neuronAuth = { auth, db, googleProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup, onAuthStateChanged, doc, setDoc, getDoc };
  </script>
</body>
</html>
